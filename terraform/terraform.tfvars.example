# GCP Project Configuration
project_id = "nava-labs"
region     = "us-central1"
zone       = "us-central1-a"

# Domain Configuration
domain_name = "labs-asp.com"

# Environment Selection (dev, preview, preview-pr-N, prod)
environment = "dev"

# VPC Network Configuration
# These are set automatically by GitHub Actions based on environment
# Dev: 10.0.0.0/16, Preview: 10.1.0.0/16, Prod: 10.2.0.0/16
vpc_cidr_public      = "10.0.0.0/20"   # Public subnet (dev default)
vpc_cidr_private     = "10.0.16.0/20"  # Private subnet (dev default)
vpc_cidr_db          = "10.0.32.0/20"  # Database subnet (dev default)
vpc_connector_cidr   = "10.0.48.0/28"  # VPC Connector (must be /28)

# Firewall Configuration
# Granular firewall rules per service with configurable ports and IPs
firewall_rules = {
  browser_mcp = {
    port                = 8931           # Playwright MCP port
    allow_public_access = true
    allowed_ip_ranges   = ["0.0.0.0/0"]
  }
  browser_streaming = {
    port                = 8933           # Browser WebSocket port
    allow_public_access = true
    allowed_ip_ranges   = ["0.0.0.0/0"]
  }
  mastra_api = {
    port                = 4112           # AI Agents API port
    allow_public_access = true
    allowed_ip_ranges   = ["0.0.0.0/0"]
  }
}

# Example: Production with custom ports and different rules per service
# firewall_rules = {
#   browser_mcp = {
#     port                = 9931           # Custom port!
#     allow_public_access = false
#     allowed_ip_ranges   = ["203.0.113.0/24"]              # Office only
#   }
#   browser_streaming = {
#     port                = 9933           # Custom port!
#     allow_public_access = false
#     allowed_ip_ranges   = ["203.0.113.0/24", "198.51.100.0/24"]  # Office + VPN
#   }
#   mastra_api = {
#     port                = 5112           # Custom port!
#     allow_public_access = false
#     allowed_ip_ranges   = ["203.0.113.50/32"]             # Specific server only
#   }
# }

# Browser VM Configuration
browser_vm_machine_type = "e2-standard-2"  # 2 vCPUs, 8GB RAM
browser_vm_disk_size    = 20                # GB
browser_image_url       = "us-central1-docker.pkg.dev/nava-labs/labs-asp/browser-streaming:latest"

# Mastra Service Configuration (AI Agent Backend)
mastra_image_url     = "us-central1-docker.pkg.dev/nava-labs/labs-asp/mastra-app:latest"
mastra_cpu           = "2"      # vCPUs
mastra_memory        = "4Gi"    # RAM
mastra_min_instances = 0        # Scale to zero
mastra_max_instances = 10       # Max scale
mastra_timeout       = 300      # 5 minutes for automation tasks

# AI Chatbot Service Configuration (Next.js Frontend)
chatbot_image_url     = "us-central1-docker.pkg.dev/nava-labs/labs-asp/ai-chatbot:latest"
chatbot_cpu           = "1"     # vCPUs
chatbot_memory        = "2Gi"   # RAM
chatbot_min_instances = 0       # Scale to zero
chatbot_max_instances = 5       # Max scale
chatbot_timeout       = 60      # 1 minute for web requests